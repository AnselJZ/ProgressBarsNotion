<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <!-- Ensures proper scaling on mobile/smaller embed containers -->
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <title>Progress Bars</title>
  <!-- Importing the font via a link tag -->
  <link href="https://fonts.googleapis.com/css2?family=Libre+Baskerville:ital,wght@0,400;0,700;1,400&display=swap" rel="stylesheet">
  <style>
    html, body {
      margin: 0;
      padding: 0;
      font-family: "Libre Baskerville", serif;
      background-color: #191919;
    }
    /* Centers the content and restricts max-width for embed-friendliness */
    .bars-container {
      padding: 20px;
      max-width: 600px;
      margin: 0 auto;
      box-sizing: border-box;
      display: flex;
      flex-direction: column;
      gap: 20px;
    }
    /* Adjusts the progress container to use full available width */
    .progress-container {
      display: flex;
      align-items: center;
      gap: 16px;
      width: 100%;
    }
    /* Makes progress bars responsive within the container */
    .progress-bar {
      flex-grow: 1;
      height: 24px;
      border: 2px solid #ff86e3;
      border-radius: 5px;
      overflow: hidden;
      background: transparent;
    }
    /* Inner progress indicator */
    .progress {
      background-color: #ff86e3;
      height: 100%;
      width: 0;
      transition: width 0.5s;
    }
    /* Label styling */
    .label {
      font-size: 16px;
      font-weight: bold;
      color: #ff86e3;
      white-space: nowrap;
    }
  </style>
</head>
<body>
  <div class="bars-container">
    <div class="progress-container">
      <div class="progress-bar">
        <div id="week-progress" class="progress"></div>
      </div>
      <div class="label">Week: <span id="week-percent"></span>%</div>
    </div>
      
    <div class="progress-container">
      <div class="progress-bar">
        <div id="month-progress" class="progress"></div>
      </div>
      <div class="label">Month: <span id="month-percent"></span>%</div>
    </div>
      
    <div class="progress-container">
      <div class="progress-bar">
        <div id="cuat-progress" class="progress"></div>
      </div>
      <div class="label">Cuatrimester: <span id="cuatri-percent"></span>%</div>
    </div>
      
    <div class="progress-container">
      <div class="progress-bar">
        <div id="year-progress" class="progress"></div>
      </div>
      <div class="label">Year: <span id="year-percent"></span>%</div>
    </div>
  </div>
  
  <script>
    // Helper function to update a progress bar element with its percentage
    function updateProgressBar(progressId, percentId, percent) {
      document.getElementById(progressId).style.width = percent + '%';
      document.getElementById(percentId).textContent = Math.floor(percent);
    }
  
    // Calculate week progress (assuming the week starts on Monday)
    function calculateWeekProgress() {
      const now = new Date();
      let day = now.getDay(); // 0 (Sun) to 6 (Sat)
      day = day === 0 ? 6 : day - 1; // Adjust so Monday is 0
      const start = new Date(now);
      start.setHours(0, 0, 0, 0);
      start.setDate(now.getDate() - day);
  
      const end = new Date(start);
      end.setDate(start.getDate() + 7);
  
      const total = end - start;
      const passed = now - start;
      return (passed / total) * 100;
    }
  
    // Calculate month progress
    function calculateMonthProgress() {
      const now = new Date();
      const start = new Date(now.getFullYear(), now.getMonth(), 1);
      const end = new Date(now.getFullYear(), now.getMonth() + 1, 1);
      const total = end - start;
      const passed = now - start;
      return (passed / total) * 100;
    }
  
    // Calculate yearly progress
    function calculateYearProgress() {
      const now = new Date();
      const start = new Date(now.getFullYear(), 0, 1);
      const end = new Date(now.getFullYear() + 1, 0, 1);
      const total = end - start;
      const passed = now - start;
      return (passed / total) * 100;
    }
  
    // Calculate cuatrimester progress (based on three segments)
    function calculateCuatrimesterProgress() {
      const now = new Date();
      let start, end;
      const month = now.getMonth(); // 0-11
      if (month < 4) {          // January - April
        start = new Date(now.getFullYear(), 0, 1);
        end = new Date(now.getFullYear(), 4, 1);
      } else if (month < 8) {     // May - August
        start = new Date(now.getFullYear(), 4, 1);
        end = new Date(now.getFullYear(), 8, 1);
      } else {                    // September - December
        start = new Date(now.getFullYear(), 8, 1);
        end = new Date(now.getFullYear() + 1, 0, 1);
      }
  
      const total = end - start;
      const passed = now - start;
      return (passed / total) * 100;
    }
  
    // Updates all progress bars
    function updateAllProgress() {
      updateProgressBar("week-progress", "week-percent", calculateWeekProgress());
      updateProgressBar("month-progress", "month-percent", calculateMonthProgress());
      updateProgressBar("year-progress", "year-percent", calculateYearProgress());
      updateProgressBar("cuat-progress", "cuatri-percent", calculateCuatrimesterProgress());
    }
  
    updateAllProgress();
    // Refresh every minute
    setInterval(updateAllProgress, 60000);
  </script>
</body>
</html>
